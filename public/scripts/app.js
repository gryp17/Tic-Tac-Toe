function common(){toastr.options={positionClass:"toast-top-center"}}function game(){io("/game")}function index(){$("#login-form button").click(function(){$.ajax({url:"/login",type:"POST",data:$("#login-form").serialize()}).done(function(t){t.user?window.location.href="/lobby":toastr.error(t)})}),$("#signup-form button").click(function(){$.ajax({url:"/signup",type:"POST",data:$("#signup-form").serialize()}).done(function(t){t.user?window.location.href="/lobby":toastr.error(t)})})}function lobby(){function t(){var t=$("#chat input[type=text]").val();t=t.trim(),$("#chat input[type=text]").val(""),t.length>0&&o.emit("chatMessage",t)}var o=io("/lobby");$("#chat button").click(function(){t()}),$("#chat input[type=text]").keypress(function(o){13===o.which&&t()}),$("#users-list").on("click","> *",function(){var t=$(this).attr("id");console.log("clicked "+t)}),o.on("chatMessage",function(t){var o=moment(t.date),e=$("<div>",{"class":"message "+t.type}),n=$("<span>",{"class":"timestamp",title:o.format("YYYY-MM-DD HH:mm:ss"),text:"["+o.format("HH:mm:ss")+"]"});if(e.append(n),"user"===t.type){var a=$("<span>",{"class":"author",text:t.author.username+":"});e.append(a)}var s=$("<span>",{"class":"content",text:t.message});e.append(s),$("#chat .chat-body").append(e);var i=$("#chat .chat-body")[0].scrollHeight;$("#chat .chat-body").scrollTop(i)}),o.on("updateUsersList",function(t){console.log("received users: "),console.log(t),$("#users-list").empty(),t.forEach(function(t){var o=$("<div>",{id:t.id,"class":"alert alert-success",text:t.username});$("#users-list").append(o)})})}$(document).ready(function(){window[$("body").attr("class")](),common()});